Using rewritten query for retrieval and prompt building.
Original query: customer due diligence obligations
Rewritten query used for RAG:
Task:
You work as a senior AML compliance auditor analysing legal obligations in the 
Hong Kong Anti-Money Laundering and Counter-Terrorist Financing Ordinance (Cap. 
615) and ERC-3643 concepts.
Based on the user's query, you must extract relevant, enforceable obligations
from the legal text provided.

User query:
"""customer due diligence obligations"""

Instructions:
- Focus only on obligations that are operational and enforceable.
- Ignore general background or high-level policy statements unless needed.
- Base all findings strictly on the provided text.

Required output format (JSON):
[
  {
    "obligation_id": "CDD-001",
    "trigger": "<when the obligation is activated>",
    "action": "<what must be done>",
    "subject": "<who must act>",
    "references": ["<section or paragraph number>"]
  },
  ...
]

Return ONLY the JSON array, with no extra explanation.
LLM response:
```json
[
  {
    "provision": "3(1)(a)",
    "severity": "Very High",
    "reinforcement_type": "Must-have",
    "compliance_objective": "Carry out customer due diligence before 
establishing a business relationship.",
    "feasibility": "Off-chain",
    "explanation": "A financial institution or a DNFBP must carry out customer 
due diligence measures before establishing a business relationship with a 
customer.",
    "erc_3643": "requireCustomerDueDiligence()"
  },
  {
    "provision": "3(1)(b)",
    "severity": "Very High",
    "reinforcement_type": "Must-have",
    "compliance_objective": "Conduct customer due diligence before occasional 
transactions above a specified amount.",
    "feasibility": "Off-chain",
    "explanation": "Customer due diligence measures must be carried out before 
carrying out an occasional transaction involving an amount equal to or above 
$120,000.",
    "erc_3643": "requireCustomerDueDiligence()"
  },
  {
    "provision": "3(1)(d)",
    "severity": "Very High",
    "reinforcement_type": "Must-have",
    "compliance_objective": "Conduct customer due diligence when suspicious 
activity is detected.",
    "feasibility": "Off-chain",
    "explanation": "Customer due diligence measures must be carried out when 
there is suspicion that the customer or the customer's account is involved in 
money laundering or terrorist financing.",
    "erc_3643": "requireCustomerDueDiligence()"
  },
  {
    "provision": "3(1)(e)",
    "severity": "Very High",
    "reinforcement_type": "Must-have",
    "compliance_objective": "Verify customer information when its adequacy is in
doubt.",
    "feasibility": "Off-chain",
    "explanation": "Customer due diligence measures must be carried out when 
there are doubts about the veracity or adequacy of any information previously 
obtained for identifying the customer.",
    "erc_3643": "requireCustomerDueDiligence()"
  },
  {
    "provision": "3(2)",
    "severity": "High",
    "reinforcement_type": "Must-have",
    "compliance_objective": "Complete customer verification promptly after 
establishing a business relationship if necessary.",
    "feasibility": "Off-chain",
    "explanation": "A financial institution or a DNFBP may verify the identity 
of a customer after establishing a business relationship if necessary, but must 
complete the verification as soon as reasonably practicable.",
    "erc_3643": "completeCustomerVerification()"
  },
  {
    "provision": "3(4)(a)",
    "severity": "Very High",
    "reinforcement_type": "Must-not-have",
    "compliance_objective": "Do not establish a business relationship without 
completing customer due diligence.",
    "feasibility": "Off-chain",
    "explanation": "If a financial institution or a DNFBP is unable to comply 
with customer due diligence requirements, it must not establish a business 
relationship with that customer.",
    "erc_3643": "terminateBusinessRelationship()"
  },
  {
    "provision": "10(1)(a)",
    "severity": "High",
    "reinforcement_type": "Must-have",
    "compliance_objective": "Obtain senior management approval for business 
relationships with politically exposed persons.",
    "feasibility": "Off-chain",
    "explanation": "Before establishing a business relationship with a 
politically exposed person, a financial institution or a DNFBP must obtain 
approval from senior management.",
    "erc_3643": "requireSeniorManagementApproval()"
  },
  {
    "provision": "10(2)(a)",
    "severity": "High",
    "reinforcement_type": "Must-not-have",
    "compliance_objective": "Do not continue business relationships with 
politically exposed persons without proper measures.",
    "feasibility": "Off-chain",
    "explanation": "If a financial institution or a DNFBP discovers that an 
existing customer is a politically exposed person, it must not continue the 
relationship without obtaining senior management approval.",
    "erc_3643": "terminateBusinessRelationship()"
  }
]
```
