ERC-3643 (T-REX) SPEC — plain text summary of modules & functions
Source of truth: EIP-3643 (“ERC-3643: T-REX - Token for Regulated EXchanges”) and official ERC3643/T-REX docs.

====================================================================
1) CORE STANDARD INTERFACES (MUST be implemented)
====================================================================

1.1 IAgentRole
Events:
- AgentAdded(address agent)
- AgentRemoved(address agent)

Functions:
- addAgent(address agent)
- removeAgent(address agent)
- isAgent(address agent) -> bool

(EIP-3643 IAgentRole) 

--------------------------------------------------

1.2 IERC3643 (Token interface) — ERC‑20 compatible
Events:
- UpdatedTokenInformation(string newName, string newSymbol, uint8 newDecimals, string newVersion, address newOnchainID)
- IdentityRegistryAdded(address identityRegistry)
- ComplianceAdded(address compliance)
- RecoverySuccess(address lostWallet, address newWallet, address investorOnchainID)
- AddressFrozen(address user, bool isFrozen, address owner)
- TokensFrozen(address user, uint256 amount)
- TokensUnfrozen(address user, uint256 amount)
- Paused(address user)
- Unpaused(address user)

Getters:
- onchainID() -> address
- version() -> string
- identityRegistry() -> IIdentityRegistry
- compliance() -> ICompliance
- paused() -> bool
- isFrozen(address user) -> bool
- getFrozenTokens(address user) -> uint256

Setters / Admin:
- setName(string name)
- setSymbol(string symbol)
- setOnchainID(address onchainID)
- pause()
- unpause()
- setAddressFrozen(address user, bool freeze)
- freezePartialTokens(address user, uint256 amount)
- unfreezePartialTokens(address user, uint256 amount)
- setIdentityRegistry(address identityRegistry)
- setCompliance(address compliance)

Transfer / Supply actions:
- forcedTransfer(address from, address to, uint256 amount) -> bool
- mint(address to, uint256 amount)
- burn(address user, uint256 amount)
- recoveryAddress(address lostWallet, address newWallet, address investorOnchainID) -> bool

Batch actions:
- batchTransfer(address[] toList, uint256[] amounts)
- batchForcedTransfer(address[] fromList, address[] toList, uint256[] amounts)
- batchMint(address[] toList, uint256[] amounts)
- batchBurn(address[] users, uint256[] amounts)
- batchSetAddressFrozen(address[] users, bool[] freeze)
- batchFreezePartialTokens(address[] users, uint256[] amounts)
- batchUnfreezePartialTokens(address[] users, uint256[] amounts)

(EIP-3643 IERC3643)

--------------------------------------------------

1.3 IIdentityRegistry
Events:
- ClaimTopicsRegistrySet(address claimTopicsRegistry)
- IdentityStorageSet(address identityStorage)
- TrustedIssuersRegistrySet(address trustedIssuersRegistry)
- IdentityRegistered(address investor, IIdentity identity)
- IdentityRemoved(address investor, IIdentity identity)
- IdentityUpdated(IIdentity oldIdentity, IIdentity newIdentity)
- CountryUpdated(address investor, uint16 country)

Getters:
- identityStorage() -> IIdentityRegistryStorage
- issuersRegistry() -> ITrustedIssuersRegistry
- topicsRegistry() -> IClaimTopicsRegistry

Setters:
- setIdentityRegistryStorage(address identityRegistryStorage)
- setClaimTopicsRegistry(address claimTopicsRegistry)
- setTrustedIssuersRegistry(address trustedIssuersRegistry)

Registry actions:
- registerIdentity(address user, IIdentity identity, uint16 country)
- deleteIdentity(address user)
- updateCountry(address user, uint16 country)
- updateIdentity(address user, IIdentity identity)
- batchRegisterIdentity(address[] users, IIdentity[] identities, uint16[] countries)

Consultation:
- contains(address user) -> bool
- isVerified(address user) -> bool
- identity(address user) -> IIdentity
- investorCountry(address user) -> uint16

(EIP-3643 IIdentityRegistry)

--------------------------------------------------

1.4 IIdentityRegistryStorage
Events:
- IdentityStored(address investor, IIdentity identity)
- IdentityUnstored(address investor, IIdentity identity)
- IdentityModified(IIdentity oldIdentity, IIdentity newIdentity)
- CountryModified(address investor, uint16 country)
- IdentityRegistryBound(address identityRegistry)
- IdentityRegistryUnbound(address identityRegistry)

Storage getters:
- storedIdentity(address user) -> IIdentity
- storedInvestorCountry(address user) -> uint16

Storage setters:
- addIdentityToStorage(address user, IIdentity identity, uint16 country)
- removeIdentityFromStorage(address user)
- modifyStoredInvestorCountry(address user, uint16 country)
- modifyStoredIdentity(address user, IIdentity identity)

Role / binding:
- bindIdentityRegistry(address identityRegistry)
- unbindIdentityRegistry(address identityRegistry)
- linkedIdentityRegistries() -> address[]

(EIP-3643 IIdentityRegistryStorage)

--------------------------------------------------

1.5 ICompliance
Events:
- TokenBound(address token)
- TokenUnbound(address token)

Initialization:
- bindToken(address token)
- unbindToken(address token)

Getters:
- isTokenBound(address token) -> bool
- getTokenBound() -> address

Compliance check & hooks:
- canTransfer(address from, address to, uint256 amount) -> bool
- transferred(address from, address to, uint256 amount)
- created(address to, uint256 amount)
- destroyed(address from, uint256 amount)

(EIP-3643 ICompliance)

--------------------------------------------------

1.6 ITrustedIssuersRegistry
Events:
- TrustedIssuerAdded(IClaimIssuer issuer, uint[] claimTopics)
- TrustedIssuerRemoved(IClaimIssuer issuer)
- ClaimTopicsUpdated(IClaimIssuer issuer, uint[] claimTopics)

Setters:
- addTrustedIssuer(IClaimIssuer issuer, uint[] claimTopics)
- removeTrustedIssuer(IClaimIssuer issuer)
- updateIssuerClaimTopics(IClaimIssuer issuer, uint[] claimTopics)

Getters:
- getTrustedIssuers() -> IClaimIssuer[]
- isTrustedIssuer(address issuer) -> bool
- getTrustedIssuerClaimTopics(IClaimIssuer issuer) -> uint[]
- getTrustedIssuersForClaimTopic(uint256 claimTopic) -> IClaimIssuer[]
- hasClaimTopic(address issuer, uint claimTopic) -> bool

(EIP-3643 ITrustedIssuersRegistry)

--------------------------------------------------

1.7 IClaimTopicsRegistry
Events:
- ClaimTopicAdded(uint256 claimTopic)
- ClaimTopicRemoved(uint256 claimTopic)

Setters:
- addClaimTopic(uint256 claimTopic)
- removeClaimTopic(uint256 claimTopic)

Getter:
- getClaimTopics() -> uint256[]

(EIP-3643 IClaimTopicsRegistry)

====================================================================
2) MODULAR COMPLIANCE SYSTEM (optional but common)
====================================================================

2.1 ModularCompliance (compliance contract with pluggable modules)
Core module management functions:
- addModule(address module)
- removeModule(address module)
- callModuleFunction(bytes callData, address module)

These are used to activate/deactivate modules and proxy module-specific configuration via callModuleFunction.

(ERC3643 Modular Compliance docs)

--------------------------------------------------

2.2 IModule (base interface every compliance module implements)
Standardized functions used by ModularCompliance:

- isPlugAndPlay() -> bool
  (declares whether the module can be bound without pre-configuration)

- canComplianceBind(address compliance) -> bool
- canComplianceUnbind(address compliance) -> bool
  (module-level allow/deny for binding/unbinding)

- moduleCheck(address from, address to, uint256 amount, address compliance) -> bool
  (the actual rule check called by canTransfer)

- moduleTransferAction(address from, address to, uint256 amount)
- moduleMintAction(address to, uint256 amount)
- moduleBurnAction(address from, uint256 amount)
  (state-update hooks called after transfers/mints/burns)

Exact naming/signatures follow the official T‑REX module interface.

(ERC3643 Compliance docs + changelog)

====================================================================
3) MODULE NAMES (examples in ecosystem)
====================================================================
NOTE: ERC‑3643 only standardizes IModule. Concrete module rule-sets are not part of the EIP itself.
Common ecosystem modules (documented examples):

- CountryAllowModule
- CountryRestrictModule
- ExchangeMonthlyLimitsModule
- MaxBalanceModule
- SupplyLimitModule
- TimeExchangeLimitsModule
- TimeTransfersLimitsModule
- TransferFeesModule
- TransferRestrictModule

Each of these:
- implements IModule (functions in section 2.2)
- exposes module‑specific configuration functions callable through
  ModularCompliance.callModuleFunction(...)

(ERC3643 “Modular Compliance add‑ons” docs)

====================================================================
End of file
====================================================================
